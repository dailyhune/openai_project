<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>도서 api</title>
</head>

<body>

    <script>
        async function bookData() {    // 데이터를 불러오는 비동기 함수 정의
            const REST_API_KEY = '8cc793823d2607c7258468c568cef857';
            const params = new URLsearchparmas({ 
                target: 'title',
                query: "자바스크립트",
                size: 50
        });

            const url = 'https://dapi.kakao.com/v3/search/book?$(params)';

            try {
                const response = await fetch(url, {
                    method: 'GET',   // ❌ 'mathod' → ✅ 'method'
                    headers: {
                        Authorization: `KakaoAK ${REST_API_KEY}`  
                    }
                });

                console.log(response);

                if(!response.ok){
                    throw new Error('HTTP오류 - 상태코드 : ' + response.status)
                }
                // console.log(response);
                const data = await response.json();    // 응답 데이터를 JSON 형태로 변환
                console.log(data.documents);    // 변환된 JSON 데이터를 콘솔에 출력
            } catch (error) {
                console.log("에러 발생:", error);    // 요청 실패 시 에러 출력 
            }
        }

        bookData();
    </script>

</body>

</html>